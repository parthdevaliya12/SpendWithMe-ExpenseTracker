import{r as j,u as N,a as v,j as s}from"./index-DCJStnxC.js";import{u as P}from"./index.esm-DZoRp5vJ.js";import{a as L,s as S,e as R,h as k,d as l}from"./index-KiaMnbIT.js";function F(){const[o,n]=j.useState(!1),m=N(),w=new URLSearchParams(location.search).get("token"),{register:d,handleSubmit:u,formState:{errors:e},watch:p}=P(),{showLoading:h,showError:x,updateLoadingToSuccess:g,updateLoadingToError:f}=v(),b=p("password",""),y=async a=>{var i;if(a.password!==a.confirmPassword){x("Passwords do not match");return}const c=h("Changing password...");n(!0);try{const r=await L.patch(`${S}/api/v1/user/auth/change-password`,{data:R({password:a.confirmPassword,token:w})},k),t=l(r.data);g(c,t.message),m("/login")}catch(r){const t=l((i=r==null?void 0:r.response)==null?void 0:i.data);f(c,(t==null?void 0:t.message)||"Something went wrong")}finally{n(!1)}};return s.jsx("div",{className:"flex w-full h-screen items-center justify-center bg-gradient-to-br from-blue-100 via-white to-cyan-100 px-4 sm:px-6",children:s.jsxs("div",{className:"w-full max-w-md p-8 bg-white shadow-lg rounded-2xl border border-gray-200",children:[s.jsxs("div",{className:"mb-8 text-center",children:[s.jsx("h1",{className:"font-serif font-bold bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent text-3xl mb-2",children:"SpendWithMe"}),s.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"Reset your password"})]}),s.jsxs("form",{className:"space-y-5",onSubmit:u(y),children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium",children:"New Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"password",id:"password",minLength:8,className:`p-3 border ${e.password?"border-red-500":"border-gray-300"} rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:border-transparent transition-all`,placeholder:"Enter your new password",...d("password",{required:"New password is required",minLength:{value:8,message:"Password must be at least 8 characters"}})})}),e.password&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.password.message})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-gray-700 text-sm font-medium",children:"Confirm Password"}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"password",id:"confirmPassword",className:`p-3 border ${e.confirmPassword?"border-red-500":"border-gray-300"} rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:border-transparent transition-all`,placeholder:"Confirm your new password",...d("confirmPassword",{required:"Please confirm your password",validate:a=>a===b||"Passwords do not match"})})}),e.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.confirmPassword.message}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Password must be at least 8 characters long"})]}),s.jsx("button",{type:"submit",className:"w-full h-12 mt-6 bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-medium rounded-lg transition-all hover:from-cyan-600 hover:to-blue-700 flex items-center justify-center",disabled:o,children:o?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating Password..."]}):"Reset Password"})]})]})})}export{F as default};
